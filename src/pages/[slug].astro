---
import { getCollection } from "astro:content";
import ToolLayout from "../layouts/ToolLayout.astro";
import { getToolBySlug } from "../lib/tools";

// Import React tool components
import JsonFormatter from "../components/tools/JsonFormatter";
import Base64Tool from "../components/tools/Base64Tool";
import UuidGenerator from "../components/tools/UuidGenerator";
import UrlEncoder from "../components/tools/UrlEncoder";
import TimestampConverter from "../components/tools/TimestampConverter";
import HashGenerator from "../components/tools/HashGenerator";
import JwtDecoder from "../components/tools/JwtDecoder";
import RegexTester from "../components/tools/RegexTester";
import DiffChecker from "../components/tools/DiffChecker";
import ColorConverter from "../components/tools/ColorConverter";
import MarkdownPreview from "../components/tools/MarkdownPreview";
import LoremIpsumGenerator from "../components/tools/LoremIpsumGenerator";
import NumberBaseConverter from "../components/tools/NumberBaseConverter";
import TextCaseConverter from "../components/tools/TextCaseConverter";
import PasswordGenerator from "../components/tools/PasswordGenerator";
import HtmlEntities from "../components/tools/HtmlEntities";
import BackslashEscape from "../components/tools/BackslashEscape";
import ChmodCalculator from "../components/tools/ChmodCalculator";
import EpochBatchConverter from "../components/tools/EpochBatchConverter";
import YamlJsonConverter from "../components/tools/YamlJsonConverter";
import CsvJsonConverter from "../components/tools/CsvJsonConverter";
import TomlJsonConverter from "../components/tools/TomlJsonConverter";
import CronParser from "../components/tools/CronParser";
import JsonPathTester from "../components/tools/JsonPathTester";
import UnicodeInspector from "../components/tools/UnicodeInspector";
import SqlFormatter from "../components/tools/SqlFormatter";
import HtmlFormatter from "../components/tools/HtmlFormatter";
import SvgOptimizer from "../components/tools/SvgOptimizer";
import OpenApiViewer from "../components/tools/OpenApiViewer";
import QrGenerator from "../components/tools/QrGenerator";
import ImageToolkit from "../components/tools/ImageToolkit";
import JwtGenerator from "../components/tools/JwtGenerator";
import HttpHeaders from "../components/tools/HttpHeaders";
import IpCalculator from "../components/tools/IpCalculator";
import GitDiffViewer from "../components/tools/GitDiffViewer";
import ListSorter from "../components/tools/ListSorter";
import WorkflowBuilder from "../components/tools/WorkflowBuilder";
import JsonToTypescript from "../components/tools/JsonToTypescript";

export async function getStaticPaths() {
  const toolEntries = await getCollection("tools");
  return toolEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const tool = getToolBySlug(entry.slug);
const slug = entry.slug;
---

<ToolLayout
  title={tool?.name || entry.data.title}
  description={tool?.description || entry.data.description}
  slug={entry.slug}
  keywords={tool?.keywords}
  beta={tool?.beta}
>
  <Fragment slot="tool">
    {slug === "json-formatter" && <JsonFormatter client:load />}
    {slug === "base64" && <Base64Tool client:load />}
    {slug === "uuid-generator" && <UuidGenerator client:load />}
    {slug === "url-encoder" && <UrlEncoder client:load />}
    {slug === "timestamp-converter" && <TimestampConverter client:load />}
    {slug === "hash-generator" && <HashGenerator client:load />}
    {slug === "jwt-decoder" && <JwtDecoder client:load />}
    {slug === "regex-tester" && <RegexTester client:load />}
    {slug === "diff-checker" && <DiffChecker client:load />}
    {slug === "color-converter" && <ColorConverter client:load />}
    {slug === "markdown-preview" && <MarkdownPreview client:load />}
    {slug === "lorem-ipsum" && <LoremIpsumGenerator client:load />}
    {slug === "number-base" && <NumberBaseConverter client:load />}
    {slug === "text-case" && <TextCaseConverter client:load />}
    {slug === "password-generator" && <PasswordGenerator client:load />}
    {slug === "html-entities" && <HtmlEntities client:load />}
    {slug === "backslash-escape" && <BackslashEscape client:load />}
    {slug === "chmod-calculator" && <ChmodCalculator client:load />}
    {slug === "epoch-batch" && <EpochBatchConverter client:load />}
    {slug === "yaml-json" && <YamlJsonConverter client:load />}
    {slug === "csv-json" && <CsvJsonConverter client:load />}
    {slug === "toml-json" && <TomlJsonConverter client:load />}
    {slug === "cron-parser" && <CronParser client:load />}
    {slug === "jsonpath-tester" && <JsonPathTester client:load />}
    {slug === "unicode-inspector" && <UnicodeInspector client:load />}
    {slug === "sql-formatter" && <SqlFormatter client:idle />}
    {slug === "html-formatter" && <HtmlFormatter client:idle />}
    {slug === "svg-optimizer" && <SvgOptimizer client:idle />}
    {slug === "openapi-viewer" && <OpenApiViewer client:idle />}
    {slug === "qr-generator" && <QrGenerator client:load />}
    {slug === "image-toolkit" && <ImageToolkit client:idle />}
    {slug === "jwt-generator" && <JwtGenerator client:idle />}
    {slug === "http-headers" && <HttpHeaders client:load />}
    {slug === "ip-calculator" && <IpCalculator client:load />}
    {slug === "git-diff" && <GitDiffViewer client:idle />}
    {slug === "list-sorter" && <ListSorter client:load />}
    {slug === "workflow" && <WorkflowBuilder client:load />}
    {slug === "json-to-typescript" && <JsonToTypescript client:load />}
  </Fragment>
  <Content />
</ToolLayout>
